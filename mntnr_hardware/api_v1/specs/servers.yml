paths:
  /hardware/servers:
    get:
      operationId: mntnr_hardware.api_v1.logic.servers_list
      summary: lists servers
      tags: ['hardware']
      responses:
        200:
          description: list of servers
          schema:
            $ref: '#/definitions/ServerList'
    post:
      operationId: mntnr_hardware.api_v1.logic.server_create
      summary: creates a server
      tags: ['hardware']
      parameters:
        - name: server
          in: body
          description: server object
          schema:
            $ref: '#/definitions/ServerCreate'
      responses:
        200:
          description: server details
          schema:
            $ref: '#/definitions/Server'
  /hardware/server/{id}:
    get:
      operationId: mntnr_hardware.api_v1.logic.server_detail
      summary: displays details about a server
      tags: ['hardware']
      parameters:
      - name: id
        type: string
        in: path
        required: true
        description: UUID of the server
      responses:
        200:
          description: server details
          schema:
            $ref: '#/definitions/Server'
    put:
      operationId: mntnr_hardware.api_v1.logic.server_update
      summary: update a server
      tags: ['hardware']
      parameters:
      - name: id
        type: string
        in: path
        required: true
        description: UUID of the server
      - name: server
        in: body
        description: server object
        schema:
          $ref: '#/definitions/ServerUpdate'
      responses:
        200:
          description: server updated
          schema:
            $ref: '#/definitions/Server'

definitions:
  ServerCreate:
    type: object
    required:
      - manufacturer
      - model
      - serial
      - rack_units
      - memory
      - cores
    properties:
      memory:
        type: integer
        description: server RAM (in GiB)
        example: 512
      cores:
        type: integer
        description: number of CPU cores
        example: 32
    allOf:
      - $ref: '#/definitions/DeviceCreate'
  Server:
    type: object
    allOf:
      - $ref: '#/definitions/Device'
    properties:
      memory:
        type: integer
        description: server RAM (in GiB)
        example: 512
      cores:
        type: integer
        description: number of CPU cores
        example: 32
  ServerList:
    type: array
    items:
      $ref: '#/definitions/Server'
  ServerUpdate:
    type: object
    properties:
      memory:
        type: integer
        description: server RAM (in GiB)
        example: 512
      cores:
        type: integer
        description: number of CPU cores
        example: 32
    allOf:
      - $ref: '#/definitions/DeviceUpdate'